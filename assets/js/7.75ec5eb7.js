(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{528:function(t,e,n){t.exports=n.p+"assets/img/20200907110205222.8b2089d9.png"},529:function(t,e,n){t.exports=n.p+"assets/img/20200907110748916.b484d249.jpg"},530:function(t,e,n){t.exports=n.p+"assets/img/20200907112047797.cc4a18c0.jpg"},531:function(t,e,n){t.exports=n.p+"assets/img/20200907112759341.d9df7bf1.png"},595:function(t,e,n){"use strict";n.r(e);var r=n(8),o=Object(r.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("p",[t._v("sCrypt是比特币合约走出来的第一步。我们看看sCrypt最被人期待的第一层Token")]),t._v(" "),r("p",[t._v("所谓第一层，就是比特币机制直接支持的Token。比特币脚本直接保证Token的增加减少分发转移符合规则，不需要其他的“二层网络“，“链下共识“等等画蛇添足技术。")]),t._v(" "),r("p",[t._v("一笔比特币交易的构成，如下图所示")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("输入")]),t._v(" "),r("th",[t._v("输出")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("输入1，Outpoint1， 解锁脚本1")]),t._v(" "),r("td",[t._v("输出1，新锁定脚本1(接收方1)，Satoshi")])]),t._v(" "),r("tr",[r("td",[t._v("输入2，Outpoint2， 解锁脚本2")]),t._v(" "),r("td",[t._v("输出2，新锁定脚本 2(接收方2)，Satoshi")])]),t._v(" "),r("tr",[r("td",[t._v("输入3，Outpoint3， 解锁脚本3")]),t._v(" "),r("td",[t._v("输出3，新锁定脚本 3 (找零)，Satoshi")])]),t._v(" "),r("tr",[r("td",[t._v("输入4，Outpoint4， 解锁脚本4")]),t._v(" "),r("td")]),t._v(" "),r("tr",[r("td",[t._v("输入5，Outpoint5， 解锁脚本5")]),t._v(" "),r("td")])])]),t._v(" "),r("p",[t._v("输入的数量可以是1到n个，输出也是1到n个。")]),t._v(" "),r("p",[t._v("其中Outpoint包含txid, ouputIndex， 可以获取原锁定脚本和包含的比特币Satoshi数量.")]),t._v(" "),r("p",[t._v("通过outpoint获取的锁定脚本可能一样也可能不一样，对应的解锁脚本也就不同。输出的新锁定脚本每一条大都是不一样的。")]),t._v(" "),r("p",[t._v("当原锁定脚本是P2PKH类型\n"),r("code",[t._v("OP_DUP OP_HASH160 $pubKeyHash OP_EQUALVERIFY OP_CHECKSIG")]),t._v("，那么解锁脚本是签名和公钥"),r("code",[t._v("sig pk")]),t._v("\n脚本匹配正确就可以使用输入中的Satoshi。所有输入包含的比特币Satoshi的合计减去所有输出的比特币Satoshi合计的差值就是矿工手续费，也叫交易手续费。")]),t._v(" "),r("p",[t._v("P2PKH脚本中只有代码，没有数据，它就是比特币脚本的"),r("code",[t._v("Hello World")]),t._v("，它解锁的只有Satoshi")]),t._v(" "),r("p",[t._v("而第一层Token的锁定脚本不仅仅有代码还有数据。")]),t._v(" "),r("p",[r("img",{staticClass:"lazy",attrs:{alt:"借用老刘画的示意图","data-src":n(528),loading:"lazy"}})]),t._v(" "),r("p",[t._v("代码部分需要保证一笔一笔的交易对数据的处理符合程序逻辑。它解锁了更广阔的天地。")]),t._v(" "),r("p",[t._v("比如数据区域包含了一只猫（一幅画）\n"),r("img",{staticClass:"lazy",attrs:{alt:"在这里插入图片描述","data-src":n(529),loading:"lazy"}}),t._v("\n代码部分就要保证这只猫在每次交易中不被分割，不会丢失。这种Token合约叫做\nNFT(NonFungibleToken)")]),t._v(" "),r("p",[t._v("合约代码的例子参见："),r("a",{attrs:{href:"https://github.com/scrypt-sv/boilerplate/blob/master/contracts/nonFungibleToken.scrypt",target:"_blank",rel:"noopener noreferrer"}},[t._v("nonFungibleToken.scrypt"),r("OutboundLink")],1),t._v("。使用前两篇文章"),r("a",{attrs:{href:"https://blog.csdn.net/weixin_47461167/article/details/108409290",target:"_blank",rel:"noopener noreferrer"}},[t._v("原像PreImage"),r("OutboundLink")],1),t._v("和"),r("a",{attrs:{href:"https://blog.csdn.net/weixin_47461167/article/details/108421502",target:"_blank",rel:"noopener noreferrer"}},[t._v("OP_PUSH_TX"),r("OutboundLink")],1),t._v("介绍的技术很容易理解。")]),t._v(" "),r("p",[t._v("还有一种可分割的Token，比如数据区域包含了8张迪斯尼的门票，那么代码部分就要保证交易过程中一直是8张门票，不会凭空多出来，也不会凭空消失。\n"),r("img",{staticClass:"lazy",attrs:{alt:"在这里插入图片描述","data-src":n(530),loading:"lazy"}})]),t._v(" "),r("p",[t._v("通过不断的交易，门票可能多次易主，有的人可能有3张门票，有的人可能一张也没有，全卖给了别人。这种Token合约要更复杂一些。")]),t._v(" "),r("p",[t._v("sCrypt官方提供多个"),r("a",{attrs:{href:"https://github.com/scrypt-sv/boilerplate/tree/master/contracts",target:"_blank",rel:"noopener noreferrer"}},[t._v("可分割Token的例子"),r("OutboundLink")],1),t._v("。使用前两篇文章"),r("a",{attrs:{href:"https://blog.csdn.net/weixin_47461167/article/details/108409290",target:"_blank",rel:"noopener noreferrer"}},[t._v("原像PreImage"),r("OutboundLink")],1),t._v("和"),r("a",{attrs:{href:"https://blog.csdn.net/weixin_47461167/article/details/108421502",target:"_blank",rel:"noopener noreferrer"}},[t._v("OP_PUSH_TX"),r("OutboundLink")],1),t._v("介绍的技术很容易理解。")]),t._v(" "),r("p",[t._v("需要继续解释的就是preimage。在原像preimage中包含两个重要的项目，第2项hashPrevouts和第8项hashOutputs，这两项根据第10项签名的类型的有所变化。在"),r("a",{attrs:{href:"https://github.com/scrypt-sv/boilerplate/blob/master/contracts/advancedCounter.scrypt",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方例子"),r("OutboundLink")],1),t._v("中出现了ANYONECANPAY类型。")]),t._v(" "),r("p",[r("img",{staticClass:"lazy",attrs:{alt:"在这里插入图片描述","data-src":n(531),loading:"lazy"}})]),t._v(" "),r("p",[t._v("根据上图可以看到 ANYONECANPAY 所指的意思是原像只包含当前的输入和所有的输出。具体到代码实现上不关心第2项hashPrevouts，只需要正确设置当前输入相关的4，5，6，7以及第8项所有的输出hashOutputs。在锁定脚本的代码部分检查了所有输出的hashOutputs是否符合逻辑。也就是迪斯尼门票的分割合并是否正确。")]),t._v(" "),r("p",[t._v("有了对输入和输出的检查手段，Token无论可分割还是不可分割，都可以在比特币脚本中作出保证。这就是第一层Token的意思。")]),t._v(" "),r("p",[t._v("对于一名比特币用户来说，他打开钱包可以看到自己的")]),t._v(" "),r("blockquote",[r("p",[t._v("比特币数量  10 BSV\n一只猫\n两张迪斯尼门票")])]),t._v(" "),r("p",[t._v("他可以将猫卖给别人，他可以去迪斯尼花掉一张门票。他可以从其他人那里买一幅蒙娜丽莎和三张去东京的飞机票。他的钱包就变成了")]),t._v(" "),r("blockquote",[r("p",[t._v("比特币数量  1.998 BSV (在交易时花了钱和一点手续费)\n一张迪斯尼门票\n一副蒙娜丽莎\n三张飞机票")])]),t._v(" "),r("p",[t._v("他把蒙娜丽莎租赁出去，每天获得租赁费 100,000 Satoshi。一个月后，他的钱包就变成了")]),t._v(" "),r("blockquote",[r("p",[t._v("比特币数量  2.298 BSV (每天增加 100,000 Satoshi * 30)\n一张迪斯尼门票\n出租蒙娜丽莎的凭证\n三张飞机票")])]),t._v(" "),r("p",[t._v("交易就是Token的买卖，租赁就是去中心化金融(DeFi)")]),t._v(" "),r("p",[t._v("官方例子并不能直接拿来给普通用户使用，sCrypt是一种可以更容易滴实现Token的技术，这种技术从比特币12年前诞生就存在，而不被发现。")]),t._v(" "),r("p",[t._v("我们说打开sCrypt的盒子，不如说sCrypt打开了比特币的盒子。")]),t._v(" "),r("p",[t._v("你想要这个打开比特币盒子的钱包吗？敬请期待......")]),t._v(" "),r("blockquote",[r("p",[t._v("享受比特币带来的安全自由， 关注使用"),r("a",{attrs:{href:"https://note.sv",target:"_blank",rel:"noopener noreferrer"}},[t._v("NoteSV"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=o.exports}}]);